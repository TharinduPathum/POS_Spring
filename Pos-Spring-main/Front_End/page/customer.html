<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customer Management</title>


  <link
          rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
  />
  <link
          href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
          rel="stylesheet"
  />
  <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />

  <style>

  /*<!--  body {-->*/
  /*<!--    margin: 0;-->*/
  /*<!--    min-height: 100vh;-->*/
  /*<!--    background: radial-gradient(circle at 20% 20%, #1b2735, #090a0f);-->*/
  /*<!--    font-family: "Segoe UI", sans-serif;-->*/
  /*<!--    display: flex;-->*/
  /*<!--    align-items: center;-->*/
  /*<!--    justify-content: center;-->*/
  /*<!--    color: #e6f1ff;-->*/
  /*<!--  }-->*/

  /*<!--  .panel {-->*/
  /*<!--    width: 95%;-->*/
  /*<!--    max-width: 1200px;-->*/
  /*<!--    background: rgba(10, 15, 25, 0.85);-->*/
  /*<!--    border-radius: 18px;-->*/
  /*<!--    box-shadow: 0 0 40px rgba(0, 195, 255, 0.25);-->*/
  /*<!--    border: 1px solid rgba(0, 195, 255, 0.35);-->*/
  /*<!--    padding: 28px;-->*/
  /*<!--    backdrop-filter: blur(10px);-->*/
  /*<!--  }-->*/

  /*<!--  .title {-->*/
  /*<!--    text-align: center;-->*/
  /*<!--    font-size: 2.2rem;-->*/
  /*<!--    font-weight: 700;-->*/
  /*<!--    letter-spacing: 1px;-->*/
  /*<!--    margin-bottom: 25px;-->*/
  /*<!--    color: #4fd1ff;-->*/
  /*<!--    text-shadow: 0 0 12px rgba(79, 209, 255, 0.6);-->*/
  /*<!--  }-->*/


  /*<!--  .form-grid {-->*/
  /*<!--    display: grid;-->*/
  /*<!--    flex-direction: column;-->*/
  /*<!--    gap: 10px;-->*/
  /*<!--    margin-bottom: 22px;-->*/
  /*<!--  }-->*/

  /*<!--  .form-grid input {-->*/
  /*<!--    background: #0f1724;-->*/
  /*<!--    border: 1px solid #1e90ff55;-->*/
  /*<!--    color: #dff3ff;-->*/
  /*<!--    padding: 14px 16px;-->*/
  /*<!--    border-radius: 10px;-->*/
  /*<!--    font-size: 0.95rem;-->*/
  /*<!--    transition: 0.2s;-->*/
  /*<!--  }-->*/

  /*<!--  .form-grid input:focus {-->*/
  /*<!--    outline: none;-->*/
  /*<!--    border-color: #00c3ff;-->*/
  /*<!--    box-shadow: 0 0 10px #00c3ff88;-->*/
  /*<!--  }-->*/


  /*<!--  .btn-row {-->*/
  /*<!--    display: flex;-->*/
  /*<!--    justify-content: center;-->*/
  /*<!--    flex-wrap: wrap;-->*/
  /*<!--    gap: 12px;-->*/
  /*<!--    margin-bottom: 24px;-->*/
  /*<!--  }-->*/

  /*<!--  .btn-row button {-->*/
  /*<!--    border: none;-->*/
  /*<!--    padding: 12px 22px;-->*/
  /*<!--    border-radius: 10px;-->*/
  /*<!--    font-weight: 600;-->*/
  /*<!--    letter-spacing: 0.5px;-->*/
  /*<!--    cursor: pointer;-->*/
  /*<!--    transition: 0.2s;-->*/
  /*<!--    display: flex;-->*/
  /*<!--    align-items: center;-->*/
  /*<!--    gap: 8px;-->*/
  /*<!--  }-->*/

  /*<!--  #addCustomer {-->*/
  /*<!--    background: linear-gradient(135deg, #00c3ff, #0066ff);-->*/
  /*<!--    color: white;-->*/
  /*<!--  }-->*/

  /*<!--  #updateCustomer {-->*/
  /*<!--    background: linear-gradient(135deg, #22c55e, #15803d);-->*/
  /*<!--    color: white;-->*/
  /*<!--  }-->*/

  /*<!--  #deleteCustomer {-->*/
  /*<!--    background: linear-gradient(135deg, #ff4d6d, #c9184a);-->*/
  /*<!--    color: white;-->*/
  /*<!--  }-->*/

  /*<!--  .btn-row button:hover {-->*/
  /*<!--    transform: translateY(-2px) scale(1.05);-->*/
  /*<!--    box-shadow: 0 0 15px rgba(0, 195, 255, 0.6);-->*/
  /*<!--  }-->*/


  /*<!--  .table-wrap {-->*/
  /*<!--    overflow: hidden;-->*/
  /*<!--    border-radius: 12px;-->*/
  /*<!--    border: 1px solid #00c3ff44;-->*/
  /*<!--  }-->*/

  /*<!--  table {-->*/
  /*<!--    width: 100%;-->*/
  /*<!--    border-collapse: collapse;-->*/
  /*<!--    background: #0b1220;-->*/
  /*<!--  }-->*/

  /*<!--  thead {-->*/
  /*<!--    background: #07101c;-->*/
  /*<!--    color: #4fd1ff;-->*/
  /*<!--  }-->*/

  /*<!--  th,-->*/
  /*<!--  td {-->*/
  /*<!--    padding: 14px 12px;-->*/
  /*<!--    text-align: left;-->*/
  /*<!--    border-bottom: 1px solid #1e293b;-->*/
  /*<!--  }-->*/

  /*<!--  tbody tr:hover {-->*/
  /*<!--    background: #00c3ff22;-->*/
  /*<!--    cursor: pointer;-->*/
  /*<!--  }-->*/

  /*<!--  .selected-row {-->*/
  /*<!--    background: #00c3ff33 !important;-->*/
  /*<!--  }-->*/

  /* -------------------- General Body -------------------- */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #0c1524, #1a2a4a);
    margin: 0;
    padding: 2rem;
    color: #e0e0e0;
    display: flex;
    justify-content: center;
  }

  /* -------------------- Panel -------------------- */
  .panel {
    width: 90%;
    max-width: 900px;
    background: rgba(12, 21, 36, 0.85);
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 8px 30px rgba(0,0,0,0.7);
    backdrop-filter: blur(6px);
  }

  /* Panel Title */
  .panel .title {
    font-size: 1.8rem;
    font-weight: 600;
    margin-bottom: 2rem;
    color: #a8c0ff;
  }

  .panel .title i {
    margin-right: 0.5rem;
    color: #ffcc00;
  }

  /* -------------------- Form Grid -------------------- */
  .form-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .form-grid input {
    flex: 1 1 200px;
    padding: 0.6rem 1rem;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.2);
    background: rgba(255,255,255,0.05);
    color: #fff;
    outline: none;
    transition: all 0.3s ease;
  }

  .form-grid input:focus {
    border-color: #4CAF50;
    box-shadow: 0 0 8px rgba(76,175,80,0.5);
  }

  /* -------------------- Button Row -------------------- */
  .btn-row {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 2rem;
  }

  .btn-row button {
    flex: 1 1 100px;
    padding: 0.6rem 1.5rem;
    border-radius: 10px;
    border: none;
    font-weight: 500;
    cursor: pointer;
    color: #fff;
    transition: all 0.3s ease;
  }

  /* Different colors for buttons */
  #addCustomer {
    background-color: #4CAF50; /* Green */
  }

  #updateCustomer {
    background-color: #2196F3; /* Blue */
  }

  #deleteCustomer {
    background-color: #f44336; /* Red */
  }

  .btn-row button:hover {
    opacity: 0.85;
    box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  }

  /* -------------------- Table -------------------- */
  .table-wrap {
    overflow-x: auto;
  }

  #customerTable {
    width: 100%;
    border-collapse: collapse;
    background: rgba(12, 21, 36, 0.7);
    border-radius: 12px;
    backdrop-filter: blur(4px);
  }

  #customerTable th,
  #customerTable td {
    padding: 0.8rem 1rem;
    text-align: left;
    color: #e0e0e0;
  }

  #customerTable th {
    background: rgba(86, 120, 190, 0.4);
  }

  #customerTable tr:nth-child(even) {
    background: rgba(255,255,255,0.05);
  }

  #customerTable tr:hover {
    background: rgba(255,255,255,0.1);
  }
  </style>
</head>

<body>
<div class="panel">
  <div class="title">
     Customer Management
  </div>


  <div class="form-grid">
    <input type="text" id="customerId" placeholder="Enter Customer ID" />
    <input type="text" id="customerName" placeholder="Enter Full Name" />
    <input type="text" id="customerAddress" placeholder="Enter Address" />
  </div>


  <div class="btn-row">
    <button id="addCustomer" onclick="saveCustomer()">
       Add
    </button>

    <button id="updateCustomer" onclick="updateCustomer()">
       Update
    </button>

    <button id="deleteCustomer" onclick="deleteCustomer()">
       Delete
    </button>
  </div>


  <div class="table-wrap">
    <table id="customerTable">
      <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Address</th>
      </tr>
      </thead>
      <tbody id="tbodyId"></tbody>
    </table>
  </div>
</div>


<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js">

</script>

<script>

function saveCustomer() {
const cid = $("#customerId").val().trim();
const cname = $("#customerName").val().trim();
const caddress = $("#customerAddress").val().trim();

console.log(cid);
console.log(cname);
console.log(caddress);

if (!cid || !cname || !caddress) {
Swal.fire({
title: "Error!",
text: "Please fill all fields",
icon: "warning",
timer: 2000,
});
return;
}

$.ajax({
url: "http://localhost:8081/api/v1/customer/save",
method: "POST",
contentType: "application/json",
data: JSON.stringify({
cId: cid,
cName: cname,
cAddress: caddress,
}),
success: function (response) {
if (response.status === 201) {
Swal.fire({
title: "Success!",
text: "Save successfully ok ðŸ™‚",
icon: "success",
timer: 2000,
});
} else {
Swal.fire({
title: "Un Success!",
text: response.message,
icon: "success",
timer: 2000,
});
}

getAllMethod();
clearForm();
lodeNextId();
},
error: function (response) {
let errormassege = "error avelable";

if (response.responseJSON) {
errormassege = response.responseJSON.message;

if (response.responseJSON.data) {
const errors = response.responseJSON.data;
errormassege = Object.values(errors).join(", ");
}
}

Swal.fire({
title: "Error!",
text: errormassege,
icon: "error",
timer: 3000,
});
},
});
}

function updateCustomer() {
lodeNextId();
const id = $("#customerId").val().trim();
const cname = $("#customerName").val().trim();
const caddress = $("#customerAddress").val().trim();
console.log(id);
console.log(cname);
console.log(caddress);

if (!id || !cname || !caddress) {
Swal.fire({
title: "Error!",
text: "Please fill all fields",
icon: "warning",
timer: 2000,
});
return;
}

$.ajax({
url: "http://localhost:8081/api/v1/customer/update",
method: "PUT",
contentType: "application/json",
data: JSON.stringify({
cId: id,
cName: cname,
cAddress: caddress,
}),
success: function (response) {
if (response.status === 200) {
Swal.fire({
title: "Success!",
text: response.message,
icon: "success",
timer: 2000,
});
}

getAllMethod();
clearForm();
},
error: function (response) {
getAllMethod();
clearForm();
let errormassege = "error avelable";

if (response.responseJSON) {
errormassege = response.responseJSON.message;

if (response.responseJSON.data) {
const errors = response.responseJSON.data;
errormassege = Object.values(errors).join(", ");
}
}

Swal.fire({
title: "Error!",
text: errormassege,
icon: "error",
timer: 3000,
});
},
});
}

function deleteCustomer() {
const cid = $("#customerId").val().trim();
const cname = $("#customerName").val().trim();
const caddress = $("#customerAddress").val().trim();


if (!cid) {
Swal.fire({
title: "Error!",
text: "Please Select a row ",
icon: "warning",
timer: 2000,
});
return;
}


$.ajax({
url: "http://localhost:8081/api/v1/customer/delete",
method: "DELETE",
contentType: "application/json",
data: JSON.stringify({
cId: cid,
cName: cname,
cAddress: caddress,
}),
success: function (response) {
if (response.status === 204) {
Swal.fire({
title: "success",
text: response.message,
icon: "success",
timer: 2000,
});
} else {
Swal.fire({
title: "Unsuccess",
text: response.message,
icon: "error",
timer: 2000,
});
}

lodeNextId();
getAllMethod();
},
error: function (respons) {
let errormassege = "error occured";

if (respons.responseJSON) {
errormassege = respons.responseJSON.message;

if (respons.responseJSON.data) {
const errors = respons.responseJSON.data;
errormassege = Object.values(errors).join(", ");
}
}

Swal.fire({
title: "warning",
text: errormassege,
icon: "warning",
timer: 3000,
});
},
});
}

function clearForm() {
$("#customerId").val("");
$("#customerName").val("");
$("#customerAddress").val("");
}

function lodeNextId() {
$.ajax({
url: "http://localhost:8081/api/v1/customer/getLastCustormerId",
method: "GET",
success: function (respons) {
let nextId = Number(respons) + 1;
const id = nextId + "";
$("#customerId").val(id);
},
error: function (respons) {
console.log("Internal Serer Error...");
},
});
}

$("#tbodyId").on("click", "tr", function () {
$("#tbodyId tr").removeClass("selected-row");
$(this).addClass("selected-row");

let id = $(this).find("td:eq(0)").text();
let name = $(this).find("td:eq(1)").text();
let address = $(this).find("td:eq(2)").text();
$("#customerId").val(id);
$("#customerName").val(name);
$("#customerAddress").val(address);
});

function getAllMethod() {
  $.ajax({
    url: "http://localhost:8081/api/v1/customer/getAll",
    method: "GET",
    success: function(customers) {
      const tbody = $("#tbodyId");
      tbody.empty();
      customers.forEach(c => {
        const row = `
          <tr>
            <td>${c.cId}</td>
            <td>${c.cName}</td>
            <td>${c.cAddress}</td>
          </tr>
        `;
        tbody.append(row);
      });
    },
    error: function(err) {
      console.log("Error fetching customers:", err);
    }
  });
}

document.addEventListener("DOMContentLoaded", function () {
lodeNextId();
getAllMethod();
});
</script>
</body>
</html>
